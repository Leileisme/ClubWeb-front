import{y as $,D as d,E as y,F as t,v as e,_ as se,ac as P,Y as k,T,P as f,O as Z,G as n,Z as ae,z as ne,ad as re,x as ue,o as i,A as ie,B as c,H as V,J as w,L as r,I as M,M as S,K as N,N as b}from"./index-b157a0df.js";import{_ as ce}from"./EventInfo-26495702.js";import{V as U}from"./VRow-aa017d72.js";import{V as s}from"./VCol-b559f5ca.js";import{_ as O}from"./InfoAll-e349a84b.js";import{_ as de}from"./EventSetList-93d34062.js";import{V as z}from"./VContainer-8f783ded.js";import{V as fe}from"./VMenu-73927176.js";import{V as me}from"./VList-4a02e8a5.js";import{V as _e,a as G}from"./VTabs-977b431c.js";import{V as pe}from"./VDivider-1d721363.js";import{V as Ee,a as K}from"./VWindowItem-9a9100f6.js";import{V as ve}from"./VChip-163feb81.js";import"./BlankLine-5918995d.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./mitt-43e253ae.js";import"./VListItem-15c4cf93.js";import"./ssrBoot-28977ed4.js";import"./VSlideGroup-262ae8e5.js";const Ie={class:"me-2",style:{"font-size":"1.1rem"}},Se={class:"",style:{"font-size":"1rem"}},D={__name:"EventHostCard",props:{item:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:""})}},setup(_){const E=$(),v=_,l=()=>{v.item.USER_NAME?E.push(`/${v.item.USER_NAME}`):console.error("props.item.USER_NAME is not defined or empty")};return(u,L)=>(d(),y(ae,{class:"rounded-lg",style:{"max-width":"400px"}},{default:t(()=>[e(se,null,{default:t(()=>[e(U,{style:{"padding-top":"3px","padding-bottom":"3px"},class:"d-flex align-center"},{default:t(()=>[e(s,{cols:"3"},{default:t(()=>[e(P,{size:"80%",onClick:l,style:{cursor:"pointer"}},{default:t(()=>[e(k,{src:_.item.IMAGE},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"9",style:{}},{default:t(()=>[e(U,null,{default:t(()=>[e(s,{cols:"8",class:"d-flex align-center",onClick:l,style:{cursor:"pointer",color:"#25ECE0"}},{default:t(()=>[T("span",Ie,f(_.item.NICK_NAME),1),T("span",Se,"第"+f(_.item.CLUB_TH)+"屆",1)]),_:1}),e(s,{cols:"4",class:"d-flex align-center"},{default:t(()=>[e(Z,{color:"#1BBCA9",style:{height:"30px"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1}),e(s,{cols:"10",style:{"padding-top":"0"}},{default:t(()=>[n(f(_.item.DESCRIBE),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ye={class:"me-5"},Te={class:"me-5"},Ce={style:{"white-space":"pre-wrap"}},De={__name:"EventIdHome",setup(_){const E=$(),v=ne(),l=re("routeEvent"),u=ue(),L=()=>{l.value.HOST.USER_NAME?E.push(`/${l.value.HOST.USER_NAME}`):console.error("goUserName is error")},j=i(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(m=>m._id===u._id)?!1:l.value.PRE_SALE-l.value.TICKET.length===0),F=i(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(m=>m._id===u._id)?"取票狀態":l.value.PRE_SALE-l.value.TICKET.length===0?"預售票掃空":"馬上取票"),{xs:Y}=ie(),I=i(()=>Y.value),W=i(()=>I.value?80:85),J=i(()=>I.value?16/9:8/3),X=i(()=>I.value?3:2),q=i(()=>I.value?"margin-bottom:5px;":"margin-bottom:15px;"),p=c("one"),Q=i(()=>p.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),ee=i(()=>p.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),C=c(!1),te=c("已經取過票溜！"),R=c(!1),B=c("Sorry！榮譽積分不足～快參加活動賺積分(-`д´-)"),g=c(!1),le=c("ㄚ！晚了一步，預售票沒有啦～"),x=c(!1),H=c(""),h=()=>{C.value=!1,R.value=!1,x.value=!1,g.value=!1,E.push(`/event/${v.params.id}`)},oe=async()=>{var m,a;if(l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(o=>o._id===u._id)){console.log("這邊要跳出 取票狀態表單");return}if(u.SCORES<l.value.SCORE_VALUES)R.value=!0;else if(l.value.PRE_SALE-l.value.TICKET.length===0)g.value=!0;else if(l.value.TICKET.some(o=>o.USER===u._id))C.value=!0;else try{E.push(`/event/${v.params.id}/ticket`)}catch(o){console.log(o);const A=((a=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:a.message)||"發生錯誤，請稍後再試";H.value=A,x.value=!0}};return(m,a)=>(d(),V(w,null,[e(z,{style:{padding:"0","max-width":"800px"}},{default:t(()=>[e(s,{cols:"12",style:{padding:"0","padding-bottom":"12px"}},{default:t(()=>[e(k,{"aspect-ratio":J.value,cover:"",src:r(l).IMAGE,style:{display:""}},null,8,["aspect-ratio","src"])]),_:1}),e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(s,{cols:"10",style:{}},{default:t(()=>[(d(!0),V(w,null,M(r(l).CATEGORY,(o,A)=>(d(),y(ve,{key:A,class:"me-2 custom-chip",color:"#25ECE0",label:"",small:""},{default:t(()=>[n(f(o),1)]),_:2},1024))),128))]),_:1}),e(s,{cols:"2",class:"d-flex justify-end"},{default:t(()=>[e(S,{style:{color:"#999"},class:"me-5"},{default:t(()=>[n("mdi-bookmark-multiple-outline")]),_:1}),e(S,{style:{color:"#999"}},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1}),I.value?N("",!0):(d(),V(w,{key:0},[e(S,{class:"ms-5",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[n("mdi-menu")]),_:1}),e(fe,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(me,null,{default:t(()=>[e(de)]),_:1})]),_:1})],64))]),_:1}),e(s,{cols:X.value,class:"d-flex justify-center",style:{"background-color":""}},{default:t(()=>[e(P,{size:W.value,onClick:L,style:{cursor:"pointer"}},{default:t(()=>[e(k,{src:r(l).HOST.IMAGE,cover:""},null,8,["src"])]),_:1},8,["size"])]),_:1},8,["cols"]),e(s,{cols:"9",style:{"font-size":"1.5rem","font-weight":"900"},class:"d-flex align-center"},{default:t(()=>[n(f(r(l).TITLE),1)]),_:1}),e(s,{cols:"12",style:{color:"#999","padding-top":"0","padding-bottom":"0","font-size":"1rem"},class:"d-flex align-center justify-end"},{default:t(()=>[e(S,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-eye-outline ")]),_:1}),T("span",ye,f(r(l).REACH),1),e(S,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1}),T("span",Te,f(r(l).LIKES.length),1),e(Z,{color:"#1BBCA9",style:{"font-weight":"900"},onClick:oe,disabled:j.value,class:"okBtn"},{default:t(()=>[n(f(F.value),1)]),_:1},8,["disabled"])]),_:1}),e(ce),e(s,{cols:"12"},{default:t(()=>[e(_e,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=o=>p.value=o),"align-tabs":"start"},{default:t(()=>[e(G,{value:"one",class:"rounded-ts-xl me-2",style:b([{"min-width":"80px"},Q.value])},{default:t(()=>[n("活動內容")]),_:1},8,["style"]),e(G,{value:"two",class:"rounded-ts-xl me-2",style:b([{"min-width":"80px"},ee.value])},{default:t(()=>[n("直播/動態")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(pe,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(Ee,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=o=>p.value=o),style:{width:"100%"}},{default:t(()=>[e(K,{value:"one"},{default:t(()=>[e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("活動介紹")]),_:1}),e(s,{cols:"12"},{default:t(()=>[T("pre",Ce,f(r(l).DESCRIPTION),1)]),_:1}),e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("主辦單位")]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(D,{item:r(l).HOST},null,8,["item"])]),_:1}),r(l).CO_ORGANIZER.length>0?(d(),y(s,{key:0,cols:"12"})):N("",!0),r(l).CO_ORGANIZER.length>0?(d(),y(s,{key:1,cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("協辦單位")]),_:1})):N("",!0),(d(!0),V(w,null,M(r(l).CO_ORGANIZER,o=>(d(),y(s,{cols:"12",key:o._id},{default:t(()=>[e(D,{item:o},null,8,["item"])]),_:2},1024))),128))]),_:1}),e(K,{value:"two"})]),_:1},8,["modelValue"]),e(s,{style:b(q.value)},null,8,["style"])]),_:1})]),_:1})]),_:1}),e(O,{InfoSwitch:R.value,InfoText:B.value,closeInfo:h,"onUpdate:InfoSwitch":a[2]||(a[2]=o=>B.value=o)},null,8,["InfoSwitch","InfoText"]),e(O,{InfoSwitch:C.value,InfoText:te.value,closeInfo:h,"onUpdate:InfoSwitch":a[3]||(a[3]=o=>C.value=o)},null,8,["InfoSwitch","InfoText"]),e(O,{InfoSwitch:g.value,InfoText:le.value,closeInfo:h,"onUpdate:InfoSwitch":a[4]||(a[4]=o=>g.value=o)},null,8,["InfoSwitch","InfoText"]),e(O,{InfoSwitch:x.value,InfoText:H.value,closeInfo:h,"onUpdate:InfoSwitch":a[5]||(a[5]=o=>x.value=o)},null,8,["InfoSwitch","InfoText"])],64))}};export{De as default};
