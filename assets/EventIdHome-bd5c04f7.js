import{y as D,D as f,E as T,F as t,v as e,_ as se,ac as P,Y as k,T as y,P as m,O as Z,G as n,Z as ae,z as ne,ad as re,x as ue,o as c,A as ie,B as d,S as ce,H as R,J as V,L as r,I as H,M as S,K as N,N as b}from"./index-ad800216.js";import{_ as de}from"./EventInfo-8a14e842.js";import{V as U}from"./VRow-d0022436.js";import{V as s}from"./VCol-dd1ffe34.js";import{_ as w}from"./InfoAll-3b75e370.js";import{_ as fe}from"./EventSetList-4e7065a5.js";import{V as z}from"./VContainer-e7174e98.js";import{V as me}from"./VMenu-0adb1837.js";import{V as _e}from"./VList-f6504b40.js";import{V as pe,a as G}from"./VTabs-d5122ecc.js";import{V as Ee}from"./VDivider-1072cf3f.js";import{V as ve,a as K}from"./VWindowItem-ef281675.js";import{V as Ie}from"./VChip-af73fb1a.js";import"./BlankLine-762864e2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./mitt-43e253ae.js";import"./VListItem-8d098606.js";import"./ssrBoot-73cf1ae6.js";import"./VSlideGroup-8639f6bc.js";const Se={class:"me-2",style:{"font-size":"1.1rem"}},Te={class:"",style:{"font-size":"1rem"}},$={__name:"EventHostCard",props:{item:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:""})}},setup(_){const p=D(),E=_,l=()=>{E.item.USER_NAME?p.push(`/${E.item.USER_NAME}`):console.error("props.item.USER_NAME is not defined or empty")};return(u,L)=>(f(),T(ae,{class:"rounded-lg",style:{"max-width":"400px"}},{default:t(()=>[e(se,null,{default:t(()=>[e(U,{style:{"padding-top":"3px","padding-bottom":"3px"},class:"d-flex align-center"},{default:t(()=>[e(s,{cols:"3"},{default:t(()=>[e(P,{size:"75",onClick:l,style:{cursor:"pointer"}},{default:t(()=>[e(k,{src:_.item.IMAGE,cover:""},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"9",style:{}},{default:t(()=>[e(U,null,{default:t(()=>[e(s,{cols:"8",class:"d-flex align-center",onClick:l,style:{cursor:"pointer",color:"#25ECE0"}},{default:t(()=>[y("span",Se,m(_.item.NICK_NAME),1),y("span",Te,"第"+m(_.item.CLUB_TH)+"屆",1)]),_:1}),e(s,{cols:"4",class:"d-flex align-center"},{default:t(()=>[e(Z,{color:"#1BBCA9",style:{height:"30px"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1}),e(s,{cols:"10",style:{"padding-top":"0"}},{default:t(()=>[n(m(_.item.DESCRIBE),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ye={class:"me-5"},Ce={class:"me-5"},ge={style:{"white-space":"pre-wrap"}},De={__name:"EventIdHome",setup(_){const p=D(),E=ne(),l=re("routeEvent"),u=ue(),L=()=>{l.value.HOST.USER_NAME?p.push(`/${l.value.HOST.USER_NAME}`):console.error("goUserName is error")},j=c(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(i=>i._id===u._id)?!1:l.value.PRE_SALE-l.value.TICKET.length===0),F=c(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(i=>i._id===u._id)?"登記票券":l.value.PRE_SALE-l.value.TICKET.length===0?"預售票掃空":"馬上取票"),{xs:Y}=ie(),I=c(()=>Y.value),W=c(()=>I.value?80:85),J=c(()=>I.value?16/9:8/3),X=c(()=>I.value?3:2),q=c(()=>I.value?"margin-bottom:5px;":"margin-bottom:15px;"),v=d("one"),Q=c(()=>v.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),ee=c(()=>v.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),C=d(!1),te=d("已經取過票溜！"),O=d(!1),M=d("Sorry！榮譽積分不足～快參加活動賺積分(-`д´-)"),g=d(!1),le=d("ㄚ！晚了一步，預售票沒有啦～"),x=d(!1),B=d(""),h=()=>{C.value=!1,O.value=!1,x.value=!1,g.value=!1,p.push(`/event/${E.params.id}`)},oe=async()=>{var i,a;if(l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(o=>o._id===u._id)){p.push(`/event/${E.params.id}/ticketUsed`);return}if(u.SCORES<l.value.SCORE_VALUES)O.value=!0;else if(l.value.PRE_SALE-l.value.TICKET.length===0)g.value=!0;else if(l.value.TICKET.some(o=>o.USER._id===u._id))C.value=!0;else try{p.push(`/event/${E.params.id}/ticket`)}catch(o){console.log(o);const A=((a=(i=o==null?void 0:o.response)==null?void 0:i.data)==null?void 0:a.message)||"發生錯誤，請稍後再試";B.value=A,x.value=!0}};return ce(()=>{console.log(l.value.TICKET),console.log(l.value.TICKET.some(i=>i.USER===u._id))}),(i,a)=>(f(),R(V,null,[e(z,{style:{padding:"0","max-width":"800px"}},{default:t(()=>[e(s,{cols:"12",style:{padding:"0","padding-bottom":"12px"}},{default:t(()=>[e(k,{"aspect-ratio":J.value,cover:"",src:r(l).IMAGE,style:{display:""}},null,8,["aspect-ratio","src"])]),_:1}),e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(s,{cols:"10",style:{}},{default:t(()=>[(f(!0),R(V,null,H(r(l).CATEGORY,(o,A)=>(f(),T(Ie,{key:A,class:"me-2 custom-chip",color:"#25ECE0",label:"",small:""},{default:t(()=>[n(m(o),1)]),_:2},1024))),128))]),_:1}),e(s,{cols:"2",class:"d-flex justify-end"},{default:t(()=>[e(S,{style:{color:"#999"},class:"me-5"},{default:t(()=>[n("mdi-bookmark-multiple-outline")]),_:1}),e(S,{style:{color:"#999"}},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1}),I.value?N("",!0):(f(),R(V,{key:0},[e(S,{class:"ms-5",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[n("mdi-menu")]),_:1}),e(me,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(_e,null,{default:t(()=>[e(fe)]),_:1})]),_:1})],64))]),_:1}),e(s,{cols:X.value,class:"d-flex justify-center",style:{"background-color":""}},{default:t(()=>[e(P,{size:W.value,onClick:L,style:{cursor:"pointer"}},{default:t(()=>[e(k,{src:r(l).HOST.IMAGE,cover:""},null,8,["src"])]),_:1},8,["size"])]),_:1},8,["cols"]),e(s,{cols:"9",style:{"font-size":"1.5rem","font-weight":"900"},class:"d-flex align-center"},{default:t(()=>[n(m(r(l).TITLE),1)]),_:1}),e(s,{cols:"12",style:{color:"#999","padding-top":"0","padding-bottom":"0","font-size":"1rem"},class:"d-flex align-center justify-end"},{default:t(()=>[e(S,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-eye-outline ")]),_:1}),y("span",ye,m(r(l).REACH),1),e(S,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1}),y("span",Ce,m(r(l).LIKES.length),1),e(Z,{color:"#1BBCA9",style:{"font-weight":"900"},onClick:oe,disabled:j.value,class:"okBtn"},{default:t(()=>[n(m(F.value),1)]),_:1},8,["disabled"])]),_:1}),e(de),e(s,{cols:"12"},{default:t(()=>[e(pe,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=o=>v.value=o),"align-tabs":"start"},{default:t(()=>[e(G,{value:"one",class:"rounded-ts-xl me-2",style:b([{"min-width":"80px"},Q.value])},{default:t(()=>[n("活動內容")]),_:1},8,["style"]),e(G,{value:"two",class:"rounded-ts-xl me-2",style:b([{"min-width":"80px"},ee.value])},{default:t(()=>[n("直播/動態")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(Ee,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(ve,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=o=>v.value=o),style:{width:"100%"}},{default:t(()=>[e(K,{value:"one"},{default:t(()=>[e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("活動介紹")]),_:1}),e(s,{cols:"12"},{default:t(()=>[y("pre",ge,m(r(l).DESCRIPTION),1)]),_:1}),e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("主辦單位")]),_:1}),e(s,{cols:"12"},{default:t(()=>[e($,{item:r(l).HOST},null,8,["item"])]),_:1}),r(l).CO_ORGANIZER.length>0?(f(),T(s,{key:0,cols:"12"})):N("",!0),r(l).CO_ORGANIZER.length>0?(f(),T(s,{key:1,cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("協辦單位")]),_:1})):N("",!0),(f(!0),R(V,null,H(r(l).CO_ORGANIZER,o=>(f(),T(s,{cols:"12",key:o._id},{default:t(()=>[e($,{item:o},null,8,["item"])]),_:2},1024))),128))]),_:1}),e(K,{value:"two"})]),_:1},8,["modelValue"]),e(s,{style:b(q.value)},null,8,["style"])]),_:1})]),_:1})]),_:1}),e(w,{InfoSwitch:O.value,InfoText:M.value,closeInfo:h,"onUpdate:InfoSwitch":a[2]||(a[2]=o=>M.value=o)},null,8,["InfoSwitch","InfoText"]),e(w,{InfoSwitch:C.value,InfoText:te.value,closeInfo:h,"onUpdate:InfoSwitch":a[3]||(a[3]=o=>C.value=o)},null,8,["InfoSwitch","InfoText"]),e(w,{InfoSwitch:g.value,InfoText:le.value,closeInfo:h,"onUpdate:InfoSwitch":a[4]||(a[4]=o=>g.value=o)},null,8,["InfoSwitch","InfoText"]),e(w,{InfoSwitch:x.value,InfoText:B.value,closeInfo:h,"onUpdate:InfoSwitch":a[5]||(a[5]=o=>x.value=o)},null,8,["InfoSwitch","InfoText"])],64))}};export{De as default};
