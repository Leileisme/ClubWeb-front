import{y as $,D as f,E as v,F as t,v as e,a5 as oe,a6 as P,a7 as b,Y as h,Q as c,P as Z,G as n,a8 as se,z as ae,a9 as ne,x as re,o as d,A as ue,B as i,H as w,J as V,L as r,I as H,M as x,O as N,K as M}from"./index-64fe88be.js";import{_ as g,a as ie}from"./InfoAll-858b8683.js";import{V as k}from"./VRow-af87a27a.js";import{V as s}from"./VCol-4c7e89b7.js";import{V as z}from"./VContainer-fec5554a.js";import{V as ce,a as G}from"./VTabs-c59cef9f.js";import{V as de}from"./VDivider-88d46b33.js";import{V as fe,a as K}from"./VWindowItem-1225efa8.js";import{V as me}from"./VChip-e05d7c28.js";import"./BlankLine-021ecd90.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ssrBoot-77ec42f0.js";const _e={class:"me-2",style:{"font-size":"1.1rem"}},Ee={class:"",style:{"font-size":"1rem"}},D={__name:"EventHostCard",props:{item:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:""})}},setup(_){const p=$(),I=_,l=()=>{I.item.USER_NAME?p.push(`/${I.item.USER_NAME}`):console.error("props.item.USER_NAME is not defined or empty")};return(u,U)=>(f(),v(se,{class:"rounded-lg",style:{"max-width":"400px"}},{default:t(()=>[e(oe,null,{default:t(()=>[e(k,{style:{"padding-top":"3px","padding-bottom":"3px"},class:"d-flex align-center"},{default:t(()=>[e(s,{cols:"3"},{default:t(()=>[e(P,{size:"80%",onClick:l,style:{cursor:"pointer"}},{default:t(()=>[e(b,{src:_.item.IMAGE},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"9",style:{}},{default:t(()=>[e(k,null,{default:t(()=>[e(s,{cols:"8",class:"d-flex align-center",onClick:l,style:{cursor:"pointer",color:"#25ECE0"}},{default:t(()=>[h("span",_e,c(_.item.NICK_NAME),1),h("span",Ee,"第"+c(_.item.CLUB_TH)+"屆",1)]),_:1}),e(s,{cols:"4",class:"d-flex align-center"},{default:t(()=>[e(Z,{color:"#1BBCA9",style:{height:"30px"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1}),e(s,{cols:"10",style:{"padding-top":"0"}},{default:t(()=>[n(c(_.item.DESCRIBE),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},pe={class:"me-5"},Ie={class:"me-5"},Ve={__name:"EventIdHome",setup(_){const p=$(),I=ae(),l=ne("routeEvent"),u=re(),U=()=>{l.value.HOST.USER_NAME?p.push(`/${l.value.HOST.USER_NAME}`):console.error("goUserName is error")},j=d(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(m=>m._id===u._id)?!1:l.value.PRE_SALE-l.value.TICKET.length===0),F=d(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(m=>m._id===u._id)?"取票狀態":l.value.PRE_SALE-l.value.TICKET.length===0?"預售票掃空":"馬上取票"),{xs:Y}=ue(),O=d(()=>Y.value),W=d(()=>O.value?16/9:8/3),J=d(()=>O.value?3:2),Q=d(()=>O.value?"margin-bottom:5px;":"margin-bottom:15px;"),E=i("one"),X=d(()=>E.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),q=d(()=>E.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),S=i(!1),ee=i("已經取過票溜！"),R=i(!1),L=i("Sorry！榮譽積分不足～快參加活動賺積分(-`д´-)"),T=i(!1),te=i("ㄚ！晚了一步，預售票沒有啦～"),C=i(!1),B=i(""),y=()=>{S.value=!1,R.value=!1,C.value=!1,T.value=!1,p.push(`/event/${I.params.id}`)},le=async()=>{var m,a;if(l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(o=>o._id===u._id)){console.log("這邊要跳出 取票狀態表單");return}if(u.SCORES<l.value.SCORE_VALUES)R.value=!0;else if(l.value.PRE_SALE-l.value.TICKET.length===0)T.value=!0;else if(l.value.TICKET.some(o=>o.USER===u._id))S.value=!0;else try{p.push(`/event/${I.params.id}/ticket`)}catch(o){console.log(o);const A=((a=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:a.message)||"發生錯誤，請稍後再試";B.value=A,C.value=!0}};return(m,a)=>(f(),w(V,null,[e(z,{style:{padding:"0","max-width":"800px"}},{default:t(()=>[e(s,{cols:"12",style:{padding:"0","padding-bottom":"12px"}},{default:t(()=>[e(b,{"aspect-ratio":W.value,cover:"",src:r(l).IMAGE,style:{display:""}},null,8,["aspect-ratio","src"])]),_:1}),e(z,null,{default:t(()=>[e(k,null,{default:t(()=>[e(s,{cols:"10",style:{}},{default:t(()=>[(f(!0),w(V,null,H(r(l).CATEGORY,(o,A)=>(f(),v(me,{key:A,class:"me-2 custom-chip",color:"#25ECE0",label:"",small:""},{default:t(()=>[n(c(o),1)]),_:2},1024))),128))]),_:1}),e(s,{cols:"2",class:"d-flex justify-end"},{default:t(()=>[e(x,{style:{color:"#999"},class:"me-5"},{default:t(()=>[n("mdi-bookmark-multiple-outline")]),_:1}),e(x,{style:{color:"#999"}},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1})]),_:1}),e(s,{cols:J.value,class:"d-flex justify-center",style:{"background-color":""}},{default:t(()=>[e(P,{size:"96%",onClick:U,style:{cursor:"pointer"}},{default:t(()=>[e(b,{src:r(l).HOST.IMAGE},null,8,["src"])]),_:1})]),_:1},8,["cols"]),e(s,{cols:"9",style:{"font-size":"1.5rem","font-weight":"900"},class:"d-flex align-center"},{default:t(()=>[n(c(r(l).TITLE),1)]),_:1}),e(s,{cols:"12",style:{color:"#999","padding-top":"0","padding-bottom":"0","font-size":"1rem"},class:"d-flex align-center justify-end"},{default:t(()=>[e(x,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-eye-outline ")]),_:1}),h("span",pe,c(r(l).REACH),1),e(x,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1}),h("span",Ie,c(r(l).LIKES.length),1),e(Z,{color:"#1BBCA9",style:{"font-weight":"900"},onClick:le,disabled:j.value,class:"okBtn"},{default:t(()=>[n(c(F.value),1)]),_:1},8,["disabled"])]),_:1}),e(ie),e(s,{cols:"12"},{default:t(()=>[e(ce,{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=o=>E.value=o),"align-tabs":"start"},{default:t(()=>[e(G,{value:"one",class:"rounded-ts-xl me-2",style:N([{"min-width":"80px"},X.value])},{default:t(()=>[n("活動內容")]),_:1},8,["style"]),e(G,{value:"two",class:"rounded-ts-xl me-2",style:N([{"min-width":"80px"},q.value])},{default:t(()=>[n("直播/動態")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(de,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(fe,{modelValue:E.value,"onUpdate:modelValue":a[1]||(a[1]=o=>E.value=o),style:{width:"100%"}},{default:t(()=>[e(K,{value:"one"},{default:t(()=>[e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("活動介紹")]),_:1}),e(s,{cols:"12"},{default:t(()=>[n(c(r(l).DESCRIPTION),1)]),_:1}),e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("主辦單位")]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(D,{item:r(l).HOST},null,8,["item"])]),_:1}),r(l).CO_ORGANIZER.length>0?(f(),v(s,{key:0,cols:"12"})):M("",!0),r(l).CO_ORGANIZER.length>0?(f(),v(s,{key:1,cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("協辦單位")]),_:1})):M("",!0),e(s,{cols:"12"},{default:t(()=>[(f(!0),w(V,null,H(r(l).CO_ORGANIZER,o=>(f(),v(D,{key:o._id,item:o},null,8,["item"]))),128))]),_:1})]),_:1}),e(K,{value:"two"})]),_:1},8,["modelValue"]),e(s,{style:N(Q.value)},null,8,["style"])]),_:1})]),_:1})]),_:1}),e(g,{InfoSwitch:R.value,InfoText:L.value,closeInfo:y,"onUpdate:InfoSwitch":a[2]||(a[2]=o=>L.value=o)},null,8,["InfoSwitch","InfoText"]),e(g,{InfoSwitch:S.value,InfoText:ee.value,closeInfo:y,"onUpdate:InfoSwitch":a[3]||(a[3]=o=>S.value=o)},null,8,["InfoSwitch","InfoText"]),e(g,{InfoSwitch:T.value,InfoText:te.value,closeInfo:y,"onUpdate:InfoSwitch":a[4]||(a[4]=o=>T.value=o)},null,8,["InfoSwitch","InfoText"]),e(g,{InfoSwitch:C.value,InfoText:B.value,closeInfo:y,"onUpdate:InfoSwitch":a[5]||(a[5]=o=>C.value=o)},null,8,["InfoSwitch","InfoText"])],64))}};export{Ve as default};
