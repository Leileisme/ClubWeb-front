import{y as oe,z as ne,R as ie,A as re,o as c,B as m,S as de,C as ce,D as p,H as v,v as t,F as s,J as x,T as l,O as k,I as D,G as T,U as pe,W as ue,X as me,Y as C,L as A,Z as M,_ as B,Q as r,E as ve,M as fe,$ as _e,a0 as ge}from"./index-c900e51a.js";import"./mitt-43e253ae.js";import{_ as he}from"./InfoAll-ef789c08.js";import{S as L}from"./swiper-bundle-f8b0b54a.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";import{V as we}from"./VContainer-ed086487.js";import{V as b}from"./VRow-ca5c1dc4.js";import{V as n}from"./VCol-d7b65e68.js";import{V as xe}from"./VSelect-804812a8.js";import"./VList-bfd4aeb5.js";import"./VListItem-d03d4fd1.js";import"./ssrBoot-d49a2ba6.js";import"./VDivider-39d1c077.js";import"./VMenu-e7f72d79.js";import"./VChip-edbe1a05.js";import"./VSlideGroup-64e7ced6.js";const I=g=>(_e("data-v-79721191"),g=g(),ge(),g),Te={class:"swiper-wrapper swiper-wrapper1"},Ie=I(()=>l("div",{class:"swiper-pagination"},null,-1)),Ee={class:"swiper-wrapper"},Se=["onClick"],Ve={class:"me-2"},ke=I(()=>l("span",null,"開始",-1)),De={style:{position:"absolute","background-color":"#fff",top:"5px",left:"5px",width:"50px",height:"50px","font-weight":"900"},class:"rounded-lg text-center"},Ce={style:{width:"100%",height:"55%","background-color":"red","font-size":"0.9rem","line-height":"1.8rem"},class:"rounded-t-lg"},Ae={style:{color:"#000","margin-top":"-2px"}},be=I(()=>l("div",{class:"swiper-pagination"},null,-1)),$e={class:"me-1"},Me=I(()=>l("span",null,"～",-1)),Be={__name:"HomeView",setup(g){const{apiAuth:z}=me(),E=oe();ne(),ie();const{xs:F,sm:Le}=re(),S=c(()=>F.value),h=m(),G=m(""),f=m(),H=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣","基隆市","新竹市","嘉義市"],P=c(()=>[..._.value].sort(()=>Math.random()-.5)),R=c(()=>[..._.value].sort(()=>Math.random()-.5)),U=c(()=>P.value.filter(u=>{let a=!0;h.value&&(a=u.TITLE.includes(h.value));let o=!0;return f.value&&(o=u.CITY===f.value),a&&o})),y=m(!1),$=m(""),N=()=>{y.value=!1},Y=c(()=>S.value?"height: 250px;":"height: 310px;"),K=c(()=>S.value?"height: 180px;":"height: 300px;"),O=c(()=>S.value?"height: 110px;":"height: 200px;"),_=m([]),W=async u=>{var a,o;try{const{data:e}=await z.get("/events/getEventAll");_.value=e.result}catch(e){console.log(e);const i=((o=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";$.value=i,y.value=!0}},d=u=>{const a=u.split(" "),o=a[0].split("/"),e=a[1].split(" "),i=a[2].split(" "),w=o[0],X=o[1].padStart(2,"0")+"."+o[2].padStart(2,"0"),j=e[0].slice(0,2)+":"+e[0].slice(2),J=i[0].slice(0,2)+":"+i[0].slice(2),Q=o[1],Z=o[2],q=o[1].padStart(2,"0")+"/"+o[2].padStart(2,"0"),ee=V=>V.replace(/\//g,"-"),te=V=>{const le=new Date(V);return["日","一","二","三","四","五","六"][le.getDay()]},se=ee(a[0]),ae=te(se);return{year:w,monthDay:X,monthDay2:q,week:ae,startTime:j,endTime:J,month:Q,day:Z}};return de(async()=>{await W(),console.log("eventAll",_.value),new L(".mySwiper",{spaceBetween:30,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:5e3}}),new L(".mySwiper2",{slidesPerView:2,spaceBetween:30,freeMode:!0,pagination:{el:".swiper-pagination",clickable:!0}})}),(u,a)=>{const o=ce("v-rop");return p(),v(x,null,[t(we,{class:"d-flex justify-center",style:{"max-width":"800px"}},{default:s(()=>[t(b,null,{default:s(()=>[t(n,{cols:"12",style:{"padding-right":"0","padding-left":"0","padding-top":"0"}},{default:s(()=>[l("div",null,[l("div",{class:"swiper swiper1 mySwiper",style:k([{position:"relative","max-width":"100vw"},Y.value])},[l("div",Te,[(p(!0),v(x,null,D(R.value.slice(0,5),(e,i)=>(p(),v("div",{class:"swiper-slide",key:i},[t(C,{cover:"",src:e.IMAGE,style:{height:"100%"},onClick:w=>A(E).push(`/event/${e._id}`)},null,8,["src","onClick"])]))),128))]),Ie],4)])]),_:1}),t(n,{cols:"12",style:{"padding-bottom":"0"}},{default:s(()=>[T("最新活動")]),_:1}),t(n,{cols:"12",style:{"padding-left":"0","padding-right":"0"}},{default:s(()=>[l("div",null,[l("div",{class:"swiper mySwiper2 swiper2",style:k([{"max-width":"100vw"},K.value])},[l("div",Ee,[(p(!0),v(x,null,D(_.value,(e,i)=>(p(),v("div",{key:i,class:"swiper-slide swiper-slide2",onClick:w=>A(E).push(`/event/${e._id}`)},[t(M,{width:"100%",class:"rounded-lg mt-1",style:{position:"relative"}},{default:s(()=>[t(B,{style:{padding:"0"}},{default:s(()=>[t(b,{style:{margin:"0",padding:"0"}},{default:s(()=>[t(n,{cols:"12",style:k([{margin:"0",padding:"0",width:"100%"},O.value])},{default:s(()=>[t(C,{src:e.IMAGE,cover:""},null,8,["src"])]),_:2},1032,["style"]),t(n,{cols:"11"},{default:s(()=>[l("span",Ve,r(e.TITLE.length>10?e.TITLE.substring(0,15)+"...":e.TITLE),1),l("span",null,r(d(e.DATE).startTime),1),ke]),_:2},1024),l("div",De,[l("div",Ce,r(d(e.DATE).month)+"月 ",1),l("div",Ae,r(d(e.DATE).day),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)],8,Se))),128))]),be],4)])]),_:1}),t(n,{cols:"12",style:{"padding-bottom":"0"}},{default:s(()=>[T("所有活動")]),_:1}),t(n,{cols:"8"},{default:s(()=>[t(pe,{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),label:"活動名稱","prepend-inner-icon":"mdi-magnify","single-line":"",variant:"outlined","hide-details":"",density:"compact",onInput:G.value},null,8,["modelValue","onInput"])]),_:1}),t(n,{cols:"4",style:{"padding-left":"0"}},{default:s(()=>[t(xe,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),items:H,density:"compact",color:"#25ECE0",label:"地區",variant:"outlined",onKeydown:a[2]||(a[2]=ue(e=>f.value=null,["delete"]))},null,8,["modelValue"])]),_:1}),(p(!0),v(x,null,D(U.value,(e,i)=>(p(),ve(n,{cols:"12",key:i},{default:s(()=>[t(M,{class:"rounded-xl",onClick:w=>A(E).push(`/event/${e._id}`)},{default:s(()=>[t(B,{style:{"padding-left":"0","padding-top":"0","padding-bottom":"0"}},{default:s(()=>[t(b,{style:{margin:"0"}},{default:s(()=>[t(n,{cols:"5",class:"text-center",style:{padding:"0",height:"130px"}},{default:s(()=>[t(C,{src:e.IMAGE,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1024),t(n,{cols:"7",style:{padding:"0"}},{default:s(()=>[t(o,null,{default:s(()=>[t(n,{cols:"12",style:{"font-size":"1.2rem","font-weight":"900","padding-bottom":"5px"}},{default:s(()=>[T(r(e.TITLE),1)]),_:2},1024),t(n,{cols:"12",style:{"padding-top":"0","padding-bottom":"5px",color:"#aaa"}},{default:s(()=>[l("span",$e,r(d(e.DATE).monthDay2)+" ("+r(d(e.DATE).week)+")",1),l("span",null,r(d(e.DATE).startTime),1),Me,l("span",null,r(d(e.DATE).endTime),1)]),_:2},1024),t(n,{cols:"12",style:{color:"#25ECE0","padding-top":"0"}},{default:s(()=>[t(fe,{style:{"font-size":"0.9rem"},class:"me-1"},{default:s(()=>[T("mdi-map-marker")]),_:1}),l("span",null,r(e.CITY),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),t(he,{InfoSwitch:y.value,InfoText:$.value,closeInfo:N,"onUpdate:InfoSwitch":a[3]||(a[3]=e=>y.value=e)},null,8,["InfoSwitch","InfoText"])],64)}}},qe=ye(Be,[["__scopeId","data-v-79721191"]]);export{qe as default};
