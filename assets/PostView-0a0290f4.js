import{B as u,o as c,S as T,Q as U,A as z,D as i,E as d,F as t,X as R,v as a,U as j,M as D,G as p,K as L,H as P,I as F,J as G,ac as V,Y as E,P as v}from"./index-ad800216.js";import"./mitt-43e253ae.js";import{S as w}from"./swiper-bundle-f8b0b54a.js";import{V as K}from"./VContainer-e7174e98.js";import{V as s}from"./VCol-dd1ffe34.js";import{V as y,a as X}from"./VListItem-8d098606.js";import{V as Y}from"./VMenu-0adb1837.js";import{V as H}from"./VList-f6504b40.js";import{V as f}from"./VRow-d0022436.js";import{V as J}from"./VDivider-1072cf3f.js";import"./ssrBoot-73cf1ae6.js";const ne={__name:"PostView",setup(Q){const _=u(),A=c(()=>[...m.value].sort(()=>Math.random()-.5));c(()=>[...m.value].sort(()=>Math.random()-.5)),c(()=>A.value.filter(r=>{let l=!0;n.value&&(l=r.TITLE.includes(n.value));let e=!0;return _.value&&(e=r.CITY===_.value),l&&e}));const k=u(!1),I=u("");c(()=>g.value?"height: 250px;":"height: 310px;"),c(()=>g.value?"height: 180px;":"height: 300px;"),c(()=>g.value?"height: 110px;":"height: 200px;");const m=u([]),M=async r=>{var l,e;try{const{data:o}=await x.get("/events/getEventAll");m.value=o.result}catch(o){console.log(o);const b=((e=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:e.message)||"發生錯誤，請稍後再試";I.value=b,k.value=!0}};T(async()=>{await M(),console.log("eventAll",m.value),new w(".mySwiper",{spaceBetween:30,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:5e3}}),new w(".mySwiper2",{slidesPerView:2,spaceBetween:30,freeMode:!0,pagination:{el:".swiper-pagination",clickable:!0}})});const{apiAuth:x}=R(),S=U(),{xs:C}=z(),g=c(()=>C.value),n=u(""),h=u([]),N=async()=>{var r,l;try{const{data:e}=await x.get("/users/getUser",{params:{search:n.value,role:"1,2,3"}});h.value=e.result.data,console.log(e,"data")}catch(e){console.log(e);const o=((l=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:l.message)||"發生錯誤，請稍後再試";S({text:o,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},B=()=>{n.value=""};return(r,l)=>(i(),d(K,{style:{"max-width":"800px"},class:"d-flex justify-center"},{default:t(()=>[a(f,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(j,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),label:"搜尋","prepend-inner-icon":"mdi-magnify","single-line":"",variant:"outlined","hide-details":"",onInput:N,id:"searchBtn",style:{position:"relative",padding:"1rem","max-width":"800px"}},{default:t(()=>[n.value!==""?(i(),d(y,{key:0,icon:"",onClick:B,style:{position:"absolute",right:"1rem",padding:"0",cursor:"pointer"}},{default:t(()=>[a(D,null,{default:t(()=>[p("mdi-close")]),_:1})]),_:1})):L("",!0)]),_:1},8,["modelValue"]),a(Y,{activator:"#searchBtn"},{default:t(()=>[a(H,{style:{"max-height":"300px","overflow-y":"auto"}},{default:t(()=>[h.value.length>0?(i(!0),P(G,{key:0},F(h.value,e=>(i(),d(y,{key:e.id,value:e.USER_NAME,to:"/"+e.USER_NAME},{default:t(()=>[g.value?(i(),d(f,{key:0,style:{margin:"5px"}},{default:t(()=>[a(s,{cols:"3",class:"d-flex justify-center align-center"},{default:t(()=>[a(V,{size:"40"},{default:t(()=>[a(E,{src:e.IMAGE,cover:""},null,8,["src"])]),_:2},1024)]),_:2},1024),a(s,{cols:"9",class:"d-flex justify-center align-center"},{default:t(()=>[a(f,null,{default:t(()=>[a(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[p(v(e.USER_NAME),1)]),_:2},1024),a(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[p(v(e.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(i(),d(f,{key:1,style:{margin:"5px"}},{default:t(()=>[a(s,{cols:"1",class:"d-flex justify-center align-center me-3",style:{height:"45px"}},{default:t(()=>[a(V,{size:"45"},{default:t(()=>[a(E,{src:e.IMAGE,cover:""},null,8,["src"])]),_:2},1024)]),_:2},1024),a(s,{cols:"9",class:"d-flex justify-center align-center"},{default:t(()=>[a(f,null,{default:t(()=>[a(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[p(v(e.USER_NAME),1)]),_:2},1024),a(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[p(v(e.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)),a(J)]),_:2},1032,["value","to"]))),128)):(i(),d(y,{key:1},{default:t(()=>[a(X,null,{default:t(()=>[p("無搜尋結果")]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ne as default};
